#
# /etc/network/interfaces
#
# Generated by Chef for <%= node[:fqdn] %>
#

# loopback network interface
auto lo
iface lo inet loopback

# Management network interface
auto <%= node[:seconion][:sensor][:mgmt][:interface] %>
iface <%= node[:seconion][:sensor][:mgmt][:interface] %> inet static
  address <%= node[:seconion][:sensor][:mgmt][:ipv4] %>
  gateway <%= node[:seconion][:sensor][:mgmt][:gateway] %>
  netmask <%= node[:seconion][:sensor][:mgmt][:netmask] %>
  dns-nameservers <%= node[:seconion][:sensor][:mgmt][:nameserver] %>
  dns-domain <%= node[:seconion][:sensor][:mgmt][:domain] %>

<% for @sniff in @sniffing_interfaces %>
auto <%= @sniff[:interface] %>
iface <%= @sniff[:interface] %> inet manual
  up ip link set $IFACE promisc on arp off up
  down ip link set $IFACE promisc off down
  post-up ethtool -G $IFACE rx 4096; for i in rx tx sg tso ufo gso gro lro; do ethtool -K $IFACE $i off; done
  post-up echo 1 > /proc/sys/net/ipv6/conf/$IFACE/disable_ipv6
  mtu <%= @sniff[:mtu] %>

<% end %>
